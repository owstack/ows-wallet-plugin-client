"use strict";angular.module("owsWalletPluginClient.filters",[]).filter("orderObjectBy",function(){return function(items,field,reverse){var filtered=[];return angular.forEach(items,function(item){filtered.push(item)}),filtered.sort(function(a,b){return a[field]>b[field]?1:-1}),reverse&&filtered.reverse(),filtered}}),angular.module("owsWalletPluginClient.services").service("externalLinkService",function(nodeWebkitService,popupService,gettextCatalog,$window,$log,$timeout){function restoreHandleOpenURL(old){$timeout(function(){$window.handleOpenURL=old},500)}var isNodeWebKit,root={};return owswallet.Plugin.ready(function(){isNodeWebKit=owswallet.Plugin.isNodeWebKit()}),root.open=function(url,optIn,title,message,okText,cancelText){var old=$window.handleOpenURL;$window.handleOpenURL=function(url){$log.debug("Skip: "+url)},isNodeWebKit?(nodeWebkitService.openExternalLink(url),restoreHandleOpenURL(old)):optIn?popupService.showConfirm(title,message,okText,cancelText,function(res){res&&window.open(url,"_system"),restoreHandleOpenURL(old)}):(window.open(url,"_system"),restoreHandleOpenURL(old))},root}),angular.module("owsWalletPluginClient.services").service("nodeWebkitService",function(){var root={};return root.readFromClipboard=function(){return require("nw.gui").Clipboard.get().get()},root.writeToClipboard=function(text){return require("nw.gui").Clipboard.get().set(text)},root.openExternalLink=function(url){return require("nw.gui").Shell.openExternal(url)},root}),angular.module("owsWalletPluginClient.services").service("popupService",function($log,$ionicPopup,$timeout,gettextCatalog,lodash){var isCordova;owswallet.Plugin.ready(function(){isCordova=owswallet.Plugin.isCordova()});var _ionicAlert=function(title,message,cb,okText){cb=cb||function(){},$ionicPopup.alert({title:title,subTitle:message,okType:"button-clear button-primary",okText:okText||gettextCatalog.getString("OK")}).then(cb)},_ionicConfirm=function(title,message,okText,cancelText,cb){cb=cb||function(){},$ionicPopup.confirm({title:title,subTitle:message,cancelText:cancelText,cancelType:"button-clear button-secondary",okText:okText,okType:"button-clear button-primary"}).then(function(res){return cb(res)})},_ionicPrompt=function(title,message,opts,cb){opts=opts||{},cb=cb||function(){},$ionicPopup.prompt({title:title,subTitle:message,cssClass:opts.class,template:'<input ng-model="data.response" type="'+opts.inputType+'" value ="" autocomplete="off" autofocus>',inputPlaceholder:opts.inputPlaceholder,defaultText:opts.defaultText}).then(function(res){return cb(res)})},_cordovaAlert=function(title,message,cb,okText){cb=cb||function(){},title=title||"",okText=okText||gettextCatalog.getString("OK"),navigator.notification.alert(message,cb,title,okText)},_cordovaConfirm=function(title,message,okText,cancelText,cb){cb=cb||function(){};var onConfirm=function(buttonIndex){return cb(2==buttonIndex?!0:!1)};okText=okText||gettextCatalog.getString("OK"),cancelText=cancelText||gettextCatalog.getString("Cancel"),title=title||"",navigator.notification.confirm(message,onConfirm,title,[cancelText,okText])},_cordovaPrompt=function(title,message,opts,cb){cb=cb||function(){};var onPrompt=function(results){return 1==results.buttonIndex?cb(results.input1):cb()},okText=gettextCatalog.getString("OK"),cancelText=gettextCatalog.getString("Cancel");title=title||"",navigator.notification.prompt(message,onPrompt,title,[okText,cancelText],opts.defaultText)};this.showAlert=function(title,message,cb,okText){title=lodash.isEmpty(title)?"":title,message=lodash.isEmpty(message)?"":message;var msg=message&&message.message?message.message:msg;$log.warn(title?title+": "+message:message),isCordova?_cordovaAlert(title,message,cb,okText):_ionicAlert(title,message,cb,okText)},this.showConfirm=function(title,message,okText,cancelText,cb){title=lodash.isEmpty(title)?"":title,message=lodash.isEmpty(message)?"":message,$log.warn(title?title+": "+message:message),isCordova?_cordovaConfirm(title,message,okText,cancelText,cb):_ionicConfirm(title,message,okText,cancelText,cb)},this.showPrompt=function(title,message,opts,cb){title=lodash.isEmpty(title)?"":title,message=lodash.isEmpty(message)?"":message,$log.warn(title?title+": "+message:message),opts=opts||{},isCordova&&!opts.forceHTMLPrompt?_cordovaPrompt(title,message,opts,cb):_ionicPrompt(title,message,opts,cb)}});